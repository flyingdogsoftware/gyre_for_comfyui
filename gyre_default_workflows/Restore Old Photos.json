{"last_node_id":170,"last_link_id":385,"nodes":[{"id":156,"type":"BOPBTL_LoadFaceDetectorModel","pos":[600,40],"size":{"0":540,"1":60},"flags":{},"order":0,"mode":0,"outputs":[{"name":"dlib_model","type":"DLIB_MODEL","links":[363],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"BOPBTL_LoadFaceDetectorModel"},"widgets_values":["dlib\\shape_predictor_68_face_landmarks.dat"]},{"id":155,"type":"BOPBTL_RestoreOldPhotos","pos":[600,330],"size":{"0":540,"1":70},"flags":{},"order":6,"mode":0,"inputs":[{"name":"bopbtl_models","type":"BOPBTL_MODELS","link":352,"slot_index":0},{"name":"image","type":"IMAGE","link":383,"slot_index":1},{"name":"scratch_mask","type":"MASK","link":371}],"outputs":[{"name":"image","type":"IMAGE","links":[364],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"BOPBTL_RestoreOldPhotos"}},{"id":157,"type":"BOPBTL_LoadFaceEnhancerModel","pos":[600,160],"size":{"0":540,"1":110},"flags":{},"order":1,"mode":0,"outputs":[{"name":"face_enhance_model","type":"FACE_ENHANCE_MODEL","links":[362],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"BOPBTL_LoadFaceEnhancerModel"},"widgets_values":["0","bopbtl\\FaceEnhancement\\FaceSR_512\\latest_net_G.pth","512"]},{"id":159,"type":"BOPBTL_LoadRestoreOldPhotosModel","pos":[10,40],"size":{"0":520,"1":190},"flags":{},"order":2,"mode":0,"outputs":[{"name":"bopbtl_models","type":"BOPBTL_MODELS","links":[352],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"BOPBTL_LoadRestoreOldPhotosModel"},"widgets_values":["0","True","True","bopbtl\\mapping_Patch_Attention\\latest_net_mapping_net.pth","bopbtl\\VAE_B_scratch\\latest_net_G.pth","bopbtl\\VAE_A_quality\\latest_net_G.pth"]},{"id":160,"type":"BOPBTL_LoadScratchMaskModel","pos":[10,290],"size":{"0":520,"1":60},"flags":{},"order":3,"mode":0,"outputs":[{"name":"scratch_model","type":"SCRATCH_MODEL","links":[353],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"BOPBTL_LoadScratchMaskModel"},"widgets_values":["bopbtl\\scratch_detection\\FT_Epoch_latest.pt"]},{"id":163,"type":"BOPBTL_DetectEnhanceBlendFaces","pos":[1210,280],"size":{"0":320,"1":70},"flags":{},"order":7,"mode":0,"inputs":[{"name":"dlib_model","type":"DLIB_MODEL","link":363},{"name":"face_enhance_model","type":"FACE_ENHANCE_MODEL","link":362},{"name":"image","type":"IMAGE","link":364}],"outputs":[{"name":"image","type":"IMAGE","links":[385],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"BOPBTL_DetectEnhanceBlendFaces"}},{"id":152,"type":"BOPBTL_ScratchMask","pos":[28,559],"size":{"0":520,"1":110},"flags":{},"order":5,"mode":0,"inputs":[{"name":"scratch_model","type":"SCRATCH_MODEL","link":353,"slot_index":0},{"name":"image","type":"IMAGE","link":384,"slot_index":1}],"outputs":[{"name":"mask","type":"MASK","links":[371],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"BOPBTL_ScratchMask"},"widgets_values":["full_size","bilinear"]},{"id":170,"type":"SaveImage","pos":[1560,410],"size":{"0":340,"1":460},"flags":{},"order":8,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":385}],"properties":{},"widgets_values":["BOPBTL"]},{"id":11,"type":"LoadImage","pos":[1210,410],"size":{"0":320,"1":460},"flags":{},"order":4,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[383,384],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["Screenshot 2024-04-27 210807.png","image"]}],"links":[[352,159,0,155,0,"BOPBTL_MODELS"],[353,160,0,152,0,"SCRATCH_MODEL"],[362,157,0,163,1,"FACE_ENHANCE_MODEL"],[363,156,0,163,0,"DLIB_MODEL"],[364,155,0,163,2,"IMAGE"],[371,152,0,155,2,"MASK"],[383,11,0,155,1,"IMAGE"],[384,11,0,152,1,"IMAGE"],[385,163,0,170,0,"IMAGE"]],"groups":[],"config":{},"extra":{"workspace_info":[],"gyre":{"lastModified":1714244745439,"lastModifiedReadable":"2024-04-27 19:05:45","tags":["LayerMenu","Deactivated"],"combo_values":{"shape_predictor_68_face_landmarks":[],"face_enhance_model":["dreamshaperXL_v2TurboDPMSDE.safetensors","sd_xl_base_1.0.safetensors","sdxl_lightning_1step_x0.safetensors","sdxl_lightning_2step.safetensors","sdxl_lightning_4step.safetensors","sdxl_lightning_8step.safetensors"],"model_face_size":["256","512"],"scratch_detection":["True","False"],"mapping_patch_attention":["True","False"],"mapping_net":["dreamshaperXL_v2TurboDPMSDE.safetensors","sd_xl_base_1.0.safetensors","sdxl_lightning_1step_x0.safetensors","sdxl_lightning_2step.safetensors","sdxl_lightning_4step.safetensors","sdxl_lightning_8step.safetensors"],"vae_b":[],"vae_a":[],"scratch_model":["dreamshaperXL_v2TurboDPMSDE.safetensors","sd_xl_base_1.0.safetensors","sdxl_lightning_1step_x0.safetensors","sdxl_lightning_2step.safetensors","sdxl_lightning_4step.safetensors","sdxl_lightning_8step.safetensors"],"input_size":["full_size","resize_256","scale_256"],"resize_method":["nearest-exact","bilinear","area","bicubic","lanczos"]},"license":"yes_commercial","forms":{"default":{"elements":[{"name":"magnifier","type":"magnifier"},{"name":"currentLayer","type":"layer_image","label":"Value_6y0om","options":[],"default":""},{"name":"advanced_options","type":"advanced_options","label":"","options":[],"default":""},{"name":"preview","type":"checkbox","label":"Preview","options":[],"default":"true","hidden":true},{"name":"newLayer","type":"checkbox","label":"New Layer","default":"true","hidden":false,"menu_type":null}]}},"mappings":{"2":[{"fromField":"blur_radius","toField":"blur_radius","toIndex":0},{"fromField":"sigma","toField":"sigma","toIndex":1}],"3":[{"fromField":"currentLayer","toField":"image","toIndex":0}],"4":[{"fromField":"resultImage","toField":"filename_prefix","toIndex":0}],"11":[{"fromField":"currentLayer","toField":"image","toIndex":0}],"170":[{"fromField":"resultImage","toField":"filename_prefix","toIndex":0}]},"category":"Special","nodeWidgets":{"2":[{"type":"number","name":"blur_radius","value":1,"options":{"min":1,"max":31,"step":10,"round":1,"precision":0},"last_y":26},{"type":"number","name":"sigma","value":1,"options":{"min":0.1,"max":10,"step":1,"round":0.1,"precision":1},"last_y":50}],"3":[{"type":"combo","name":"image","value":"0y6u8","options":{"values":["043tx","04coj","04spl","07b0x","0a9yg","0bmcf","0mc2","0myqii","0sp5y","0y6u8","11pym","14uv7k","16qat","1713s","1eqnrg","1hpu5","1lk4h","1m3ed","1m59cg","1szfj","24dllf","2dudf","2fwgs","2tym0l","2xae8","31b2y","34adk","34zs","3e80s","3gdtg","3nm7i","3p4d4","3q9wh","3qtzv","3rgb3","3t0dr","3w119g","3yzuc","435mfk","436fp","47g3e","4chpt","4hgar","4i5tz","4kjn9","4lela","4y2f7","547p2","55dka","584zc","5a9kp","5c1742cc-57c8-41d7-911f-52efa646cac3.png","5nadt","5xufd","5yeix","68ufhg","69edb","6bd9df","6d3ffh","6e5fwg","6fuei","6hnmo","6ntor","6osoc","6p65u","6xrrd","6yfcw","703xe","70k0h","70v4h","7byk4","7qqqa","7r1mql","7tq0k","7tsq0j","7ttdli","7wmen","80fr6f","83eew","87ffe","8cwy","8d4qb","8k5od","8k9r9","8ps86","8rvic","8v6ma","8wm9u","942yt","9d102","9d3m6","9fc39j","9gtz6","9h1wg","9i747i","9jo59l","9lhv3","9q75m","9u44v","9w0ke","_58c92a4f-18e7-403a-8b28-036877c6752f.jpg","_8bdc0de3-247a-4531-8c76-238f4c21fa8b.jpg","a3fkc","a6995","a76j8l","a90tu","ac49f","aejp8","ahbmt","aimee6.png","aknej","amhh5","asoz6","ayz9t","b2ytqf","b49dg","b5w3hl","b95qm","bdsr7","be2dw","bijor","bk2p2","bog8c","bsse5","bur7l","bx6ep","byc14h","c7btk","c7ka","c8k4x","cdwh3","cf3j3","cf9ys","chunfk","cjssh","d05ec","d3a9","d6465","d6mrx","d8q9e","dcebi","de9pf","dfjv8","dg29q","dkhbr","dnmy","dq0ix","drmyh","dux4u","dv8xn","dwz01","dxi4h","e0r0g","e5um6h","e7owe","eifjm","eogo","eqbwp","evln1k","example.png","f5mfg","fdtp9","fg1rw","fhpst","fmqfe","fr9evg","ftc1o","fv617","g13ryh","g657u","gp94j","gqaae","gsq5u","gyktxf","hgi9i","hl2el","hmmcu","hnkcp","hog5g","hr0k2","htbuc","husxb","hvev2","i5r6ag","ija0r","ijkwx","ipw7yk","j44zog","j4cvj","jf44ol","jkpf3","jm21rh","jo4i2","jodsil","jp7x7","jpek1","jrga6","jrurb","js00hf","jtf1v","jvqnx","k3g19","kby05","kk02g","kmvkv","kt1tli","kttgsf","kwigg","l049g","l4q5p","l7q3d","l7zm8j","l8nf8j","la7xn","ld7wu","lfjgzg","lfop5","lqps6i","ltkbv","lujgx","lv78i","ly5yrh","m24tl","m4bcv","m8fcp","mbhcf","mea5y","mfr7b","mp37kf","mrq98","mu9x6h","mvuyw","n8libh","nbl5g","nccvn","neqxb","nh9soi","ni6f1h","nygfc","o19pe","o58z7","o7wcx","o9cr4j","ogwdh","ok4jq","oop6t","otzpr","oy6hc","ozi1ph","pcb3ok","ply2a","psmdy","pvild","pzc1w","q3vnb","q6ufz","q9ive","q9rew","qd5gq","qdsweg","qeixpi","qs4vff","qskd","qtia8","qw6we","qxf5o","qy7at","qyov","r1ygq","r6i9d","r71g3","r83dt","r8ngih","r8ulj","rbqu5","rcqjgh","ris5t","rnadoi","rq32q","rqcdb","rqyd1","rre27","rrggu","rt5bh","rv93i","s2xnqj","s7i5h","s9pe1i","scripple_ball.png","sjouyf","sjrnug","snazw","sno8gi","spn0vk","subz7","t2jdd","t3hnk","t6nkc","tcdi5","tfj0k","tke5d","totsn","ttb9m","twd8w","u72l1","u7m5h","ublto","ud831","ufqbf","uhm26","uivwb","ukzc8","unh6a","uqdll","ur1gkl","ut2zuj","utkc6","uwye5","uylzf","v915m","v92wkh","v9673","vgwts","vkaps","vky08","vr3di","vrnvtj","vtfli","vv35q","vz6s1","wbkrb","wmxu9","workflow_api (1).json","wouyk","x0ges","x4guf","xa95k","xacfo","xb8cd","xinq5","xkz9d","xl9c8","xpp49g","xv1tv","y8cbcl","y9yvk","ylaz7i","ynlqz","yriz2","yruxc","yvwvki","yy06t","z18q4","z5q0b","zch7g","zh36bf","zhb6sj","zhrnq","zhtkq","zwigl","zxedo"]},"_real_value":"0y6u8","last_y":46},{"type":"button","name":"upload","value":"image","options":{},"label":"choose file to upload","serialize":false,"last_y":70}],"4":[{"type":"text","name":"filename_prefix","value":"ComfyUI","options":{},"last_y":26}],"11":[{"type":"combo","name":"image","value":"Screenshot 2024-04-27 210807.png","options":{"values":["043tx","04coj","04spl","07b0x","0a9yg","0bmcf","0mc2","0myqii","0r428","0sp5y","0y6u8","11pym","14uv7k","16qat","1713s","1ena6f","1eqnrg","1hpu5","1lk4h","1m3ed","1m59cg","1szfj","24dllf","2dudf","2fwgs","2tym0l","2xae8","31b2y","34adk","34zs","3e80s","3gdtg","3nm7i","3p4d4","3q9wh","3qtzv","3rgb3","3t0dr","3w119g","3yzuc","435mfk","436fp","47g3e","4chpt","4hgar","4i5tz","4kjn9","4lela","4y2f7","547p2","55dka","584zc","5a9kp","5c1742cc-57c8-41d7-911f-52efa646cac3.png","5nadt","5xufd","5yeix","68ufhg","69edb","6bd9df","6d3ffh","6e5fwg","6fuei","6hnmo","6ntor","6osoc","6p65u","6xe67h","6xrrd","6yfcw","703xe","70k0h","70v4h","7byk4","7qqqa","7r1mql","7tq0k","7tsq0j","7ttdli","7w79ki","7wmen","80fr6f","83eew","87ffe","8cwy","8d4qb","8k5od","8k9r9","8ps86","8rvic","8v6ma","8wm9u","942yt","9d102","9d3m6","9fc39j","9gtz6","9h1wg","9i747i","9jo59l","9lhv3","9q75m","9u44v","9w0ke","_58c92a4f-18e7-403a-8b28-036877c6752f.jpg","_8bdc0de3-247a-4531-8c76-238f4c21fa8b.jpg","a3fkc","a6995","a76j8l","a90tu","ac49f","aejp8","ahbmt","aimee6.png","akjesh","aknej","amhh5","asoz6","ayz9t","b2ytqf","b49dg","b5w3hl","b95qm","bdsr7","be2dw","bijor","bk2p2","bog8c","bsse5","bur7l","bx6ep","byc14h","c7btk","c7ka","c8k4x","cdwh3","cf3j3","cf9ys","chunfk","cjssh","cko56","d05ec","d3a9","d6465","d6mrx","d8q9e","dcebi","de9pf","dfjv8","dg29q","dkhbr","dnmy","dq0ix","drmyh","dux4u","dv8xn","dwz01","dxi4h","e0r0g","e5um6h","e7owe","eifjm","eogo","eqbwp","et2sa","evln1k","example.png","f5mfg","fdtp9","fg1rw","fhpst","fmqfe","fr9evg","ftc1o","fv617","g13ryh","g657u","gp94j","gqaae","gsq5u","gyktxf","h71v","hgi9i","hl2el","hmmcu","hnkcp","hog5g","hr0k2","htbuc","husxb","hvev2","i5r6ag","ija0r","ijkwx","ipw7yk","j1fo1","j44zog","j4cvj","jf44ol","jkpf3","jm21rh","jo4i2","jodsil","jp7x7","jpek1","jrga6","jrurb","js00hf","jtf1v","jvqnx","k3g19","kby05","kk02g","kmvkv","kt1tli","kttgsf","kwigg","l049g","l4q5p","l7q3d","l7zm8j","l8nf8j","la7xn","ld7wu","lfjgzg","lfop5","lqps6i","ltkbv","lujgx","lv78i","ly5yrh","m24tl","m4bcv","m8fcp","mbhcf","mea5y","mfr7b","mp37kf","mrq98","mu9x6h","mvuyw","n8libh","nbl5g","nccvn","neqxb","nh9soi","ni6f1h","nygfc","o19pe","o58z7","o7wcx","o9cr4j","ogwdh","ok4jq","oop6t","otzpr","oy6hc","ozi1ph","pcb3ok","ply2a","psmdy","pvild","pzc1w","q3vnb","q6ufz","q9ive","q9rew","qaugh","qd5gq","qdsweg","qeixpi","qs4vff","qskd","qtia8","qw6we","qxf5o","qy7at","qyov","r1ygq","r6i9d","r71g3","r83dt","r8ngih","r8ulj","rbqu5","rcqjgh","ris5t","rnadoi","rq32q","rqcdb","rqyd1","rre27","rrggu","rt5bh","rv93i","s2xnqj","s7i5h","s9pe1i","scripple_ball.png","sjouyf","sjrnug","snazw","sno8gi","spn0vk","subz7","t2jdd","t3hnk","t6nkc","tcdi5","tfj0k","tke5d","totsn","ttb9m","twd8w","u72l1","u7m5h","ublto","ud831","ufqbf","uhm26","uivwb","ukzc8","unh6a","uqdll","ur1gkl","ut2zuj","utkc6","uwye5","uylzf","v915m","v92wkh","v9673","vgwts","vkaps","vky08","vr3di","vrnvtj","vtfli","vv35q","vz6s1","wbkrb","wmxu9","workflow_api (1).json","wouyk","x0ges","x4guf","xa95k","xacfo","xb8cd","xinq5","xkz9d","xl9c8","xpp49g","xv1tv","y8cbcl","y9yvk","ylaz7i","ynlqz","yriz2","yruxc","yvwvki","yy06t","z18q4","z5q0b","zch7g","zh36bf","zhb6sj","zhrnq","zhtkq","zwigl","zxedo","Screenshot 2024-04-27 210807.png"]},"_real_value":"Screenshot 2024-04-27 210807.png","last_y":46},{"type":"button","name":"upload","value":"image","options":{},"label":"choose file to upload","serialize":false,"last_y":70,"clicked":false}],"152":[{"type":"combo","name":"input_size","value":"full_size","options":{"values":["full_size","resize_256","scale_256"]},"last_y":46},{"type":"combo","name":"resize_method","value":"bilinear","options":{"values":["nearest-exact","bilinear","area","bicubic","lanczos"]},"last_y":70}],"156":[{"type":"combo","name":"shape_predictor_68_face_landmarks","value":"dlib\\shape_predictor_68_face_landmarks.dat","options":{"values":[]},"last_y":26}],"157":[{"type":"text","name":"device_ids","value":"0","options":{},"last_y":26},{"type":"combo","name":"face_enhance_model","value":"bopbtl\\FaceEnhancement\\FaceSR_512\\latest_net_G.pth","options":{"values":["dreamshaperXL_v2TurboDPMSDE.safetensors","sd_xl_base_1.0.safetensors","sdxl_lightning_1step_x0.safetensors","sdxl_lightning_2step.safetensors","sdxl_lightning_4step.safetensors","sdxl_lightning_8step.safetensors"]},"last_y":50},{"type":"combo","name":"model_face_size","value":"512","options":{"values":["256","512"]},"last_y":74}],"159":[{"type":"text","name":"device_ids","value":"0","options":{},"last_y":26},{"type":"combo","name":"scratch_detection","value":"True","options":{"values":["True","False"]},"last_y":50},{"type":"combo","name":"mapping_patch_attention","value":"True","options":{"values":["True","False"]},"last_y":74},{"type":"combo","name":"mapping_net","value":"bopbtl\\mapping_Patch_Attention\\latest_net_mapping_net.pth","options":{"values":["dreamshaperXL_v2TurboDPMSDE.safetensors","sd_xl_base_1.0.safetensors","sdxl_lightning_1step_x0.safetensors","sdxl_lightning_2step.safetensors","sdxl_lightning_4step.safetensors","sdxl_lightning_8step.safetensors"]},"last_y":98},{"type":"combo","name":"vae_b","value":"bopbtl\\VAE_B_scratch\\latest_net_G.pth","options":{"values":[]},"last_y":122},{"type":"combo","name":"vae_a","value":"bopbtl\\VAE_A_quality\\latest_net_G.pth","options":{"values":[]},"last_y":146}],"160":[{"type":"combo","name":"scratch_model","value":"bopbtl\\scratch_detection\\FT_Epoch_latest.pt","options":{"values":["dreamshaperXL_v2TurboDPMSDE.safetensors","sd_xl_base_1.0.safetensors","sdxl_lightning_1step_x0.safetensors","sdxl_lightning_2step.safetensors","sdxl_lightning_4step.safetensors","sdxl_lightning_8step.safetensors"]},"last_y":26}],"170":[{"type":"text","name":"filename_prefix","value":"BOPBTL","options":{},"last_y":26}]},"workflowid":"qefv4yzs0b"}},"version":0.4}